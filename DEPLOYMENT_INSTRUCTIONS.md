# π€ μ΄λ―Έμ§€ ν’μ§ κ°μ„  - λ°°ν¬ κ°€μ΄λ“

## π“‹ λ³€κ²½ μ‚¬ν•­ μ”μ•½

### μμ •λ νμΌ
1. **src/components/ImageWithFallback.tsx**
   - `imageSize` prop μ¶”κ°€ ('small' | 'medium' | 'large')
   - κ³ ν™”μ§ μ΄λ―Έμ§€ μ”μ²­μ„ μ„ν• `?size=640` νλΌλ―Έν„° μ¶”κ°€

2. **src/pages/index.tsx**
   - TOP 3 μ„Ήμ…μ— `imageSize="large"` μ μ©
   - HOT TRACKS μ„Ήμ…μ— `imageSize="large"` μ μ©

3. **src/pages/trending.tsx**
   - API URLμ— `?size=640` νλΌλ―Έν„° μ¶”κ°€

4. **next.config.js**
   - experimental.excludePaths μ¶”κ°€ (admin νμ΄μ§€ μ μ™Έ)

## π― λ°°ν¬ λ°©λ²•

### Vercel λ°°ν¬ (κ¶μ¥)
```bash
# 1. λ³€κ²½μ‚¬ν•­ μ»¤λ°‹
git add .
git commit -m "feat: μ΄λ―Έμ§€ ν’μ§ κ°μ„  - 640x640 κ³ ν™”μ§ μ΄λ―Έμ§€ μ μ©"

# 2. Vercelμ— ν‘Έμ‹
git push origin main

# Vercelμ΄ μλ™μΌλ΅ λΉλ“ λ° λ°°ν¬ν•©λ‹λ‹¤
```

### μλ™ λΉλ“ λ° λ°°ν¬
```bash
# 1. μμ΅΄μ„± μ„¤μΉ
npm install

# 2. ν”„λ΅λ•μ… λΉλ“ (μΌλ¶€ admin νμ΄μ§€ μ—λ¬λ” λ¬΄μ‹)
npm run build

# 3. μ •μ  νμΌ ν™•μΈ
ls -la .next/

# 4. FastCometμ— μ—…λ΅λ“
# .next/ ν΄λ”μ™€ public/ ν΄λ”λ¥Ό μ„λ²„μ— μ—…λ΅λ“
```

## β οΈ μ£Όμμ‚¬ν•­

### λ°±μ—”λ“ API ν™•μΈ ν•„μ”
ν”„λ΅ νΈμ—”λ“κ°€ λ‹¤μ ν•μ‹μΌλ΅ μ΄λ―Έμ§€λ¥Ό μ”μ²­ν•©λ‹λ‹¤:
```
GET /api/album-image-smart/{artist}/{track}?size=640
```

**λ°±μ—”λ“κ°€ `?size` νλΌλ―Έν„°λ¥Ό μ§€μ›ν•μ§€ μ•λ” κ²½μ°:**
- νλΌλ―Έν„°λ” λ¬΄μ‹λλ©° κΈ°μ΅΄ λ™μ‘ μ μ§€
- μ΄λ―Έμ§€ ν’μ§ κ°μ„  ν¨κ³Ό μ—†μ
- λ°±μ—”λ“ μ—…λ°μ΄νΈ ν•„μ”

### λΉλ“ μ—λ¬ κ΄€λ ¨
λ‹¤μ νμ΄μ§€λ“¤μ€ SSG μ—λ¬κ°€ λ°μƒν•μ§€λ§ μ •μƒ λ™μ‘ν•©λ‹λ‹¤:
- /admin/** (κ΄€λ¦¬μ νμ΄μ§€ - SSR μ‚¬μ©)
- /about, /login λ“± (useRouter μμ΅΄ νμ΄μ§€)

**ν•΄κ²° λ°©λ²•:**
- Vercel λ°°ν¬ μ‹ μλ™μΌλ΅ SSRλ΅ ν΄λ°±λ¨
- λλ” κ° νμ΄μ§€μ— `getServerSideProps` μ¶”κ°€

## π§ ν…μ¤νΈ λ°©λ²•

### λ΅μ»¬ ν…μ¤νΈ
```bash
# κ°λ° λ¨λ“ μ‹¤ν–‰
npm run dev

# λΈλΌμ°μ €μ—μ„ ν™•μΈ
# http://localhost:3000
```

### ν™•μΈ μ‚¬ν•­
1. β… λ©”μΈ νμ΄μ§€ TOP 3 μ΄λ―Έμ§€κ°€ μ„ λ…ν•κ°€?
2. β… HOT TRACKS μ΄λ―Έμ§€κ°€ μ„ λ…ν•κ°€?
3. β… νΈλ λ”© νμ΄μ§€ μ΄λ―Έμ§€κ°€ μ„ λ…ν•κ°€?
4. β… λΈλΌμ°μ € κ°λ°μ λ„κµ¬μ—μ„ μ΄λ―Έμ§€ URLμ— `?size=640` νλΌλ―Έν„° ν¬ν•¨λλ”κ°€?

### ν”„λ΅λ•μ… ν™•μΈ
```bash
# ν”„λ΅λ•μ… λΉλ“λ΅ λ΅μ»¬ ν…μ¤νΈ
npm run build
npm start

# λλ”
npx serve out
```

## π”„ λ΅¤λ°± λ°©λ²•

λ³€κ²½μ‚¬ν•­μ„ λ΅¤λ°±ν•λ ¤λ©΄:
```bash
# μ΄μ „ μ»¤λ°‹μΌλ΅ λλλ¦¬κΈ°
git revert HEAD

# λλ” νΉμ • μ»¤λ°‹μΌλ΅
git reset --hard <commit-hash>

# Vercelμ— ν‘Έμ‹
git push origin main
```

## π“ λ¬Έμ  ν•΄κ²°

### μ΄λ―Έμ§€κ°€ μ—¬μ „ν μ €ν™”μ§μΈ κ²½μ°
1. λ°±μ—”λ“ APIκ°€ `?size=640` νλΌλ―Έν„°λ¥Ό μ§€μ›ν•λ”μ§€ ν™•μΈ
2. λΈλΌμ°μ € μΊμ‹ ν΄λ¦¬μ–΄ (Ctrl+Shift+R)
3. CDN μΊμ‹ ν΄λ¦¬μ–΄ (Vercel λ€μ‹λ³΄λ“)

### λΉλ“ μ‹¤ν¨ν•λ” κ²½μ°
```bash
# μμ΅΄μ„± μ¬μ„¤μΉ
rm -rf node_modules package-lock.json
npm install

# μΊμ‹ ν΄λ¦¬μ–΄ ν›„ λΉλ“
rm -rf .next
npm run build
```

## π“ μ„±λ¥ λ¨λ‹ν„°λ§

### ν™•μΈν•  μ§€ν‘
- **μ΄λ―Έμ§€ λ΅λ”© μ‹κ°„**: μ¦κ°€ν•  μ μμ (2-3λ°°)
- **νμ΄μ§€ λ΅λ”© μ‹κ°„**: Lazy loadingμΌλ΅ μµμ†ν™”λ¨
- **λ€μ—­ν­ μ‚¬μ©λ‰**: μ•½κ°„ μ¦κ°€
- **μ‚¬μ©μ λ§μ΅±λ„**: λ€ν­ κ°μ„  μμƒ

### μµμ ν™” μµμ…
ν•„μ”μ‹ λ‹¤μ μ„¤μ • μ΅°μ •:
```typescript
// ImageWithFallback.tsxμ—μ„
imageSize="medium"  // 640 λ€μ‹  300 μ‚¬μ©
```

---

**μ‘μ„±μΌ**: 2025-11-18
**μ‘μ„±μ**: Claude Code
