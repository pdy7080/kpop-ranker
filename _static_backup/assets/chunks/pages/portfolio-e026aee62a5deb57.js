(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[371],{5073:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/portfolio",function(){return a(4352)}])},4352:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var s=a(5893),r=a(7294),i=a(9008),l=a.n(i),d=a(3161),c=a(3495),n=a(2914),x=a(6501),m=a(1664),o=a.n(m);function h(){let[e,t]=(0,r.useState)(null),[i,m]=(0,r.useState)(!1),[h,y]=(0,r.useState)([]),[g,p]=(0,r.useState)(null),[j,N]=(0,r.useState)(!0),[u,b]=(0,r.useState)("overview");(0,r.useEffect)(()=>{m(!0),Promise.resolve().then(a.t.bind(a,1163,23)).then(e=>{let{useRouter:a}=e;t(a())})},[]),(0,r.useEffect)(()=>{w()},[]);let w=async()=>{try{N(!0);let e=await fetch("/api/portfolio",{headers:{"X-User-ID":"demo_user"}});if(e.ok){let t=await e.json();if(y(t.items||[]),t.items&&t.items.length>0){let e={total_items:t.items.length,total_artists:new Set(t.items.map(e=>e.artist)).size,total_tracks:t.items.length,avg_rank:null,best_rank:null,worst_rank:null,top_gainers:[],top_losers:[]};p(e)}}}catch(e){console.error("포트폴리오 데이터 로드 실패:",e),x.ZP.error("포트폴리오 데이터를 불러오는데 실패했습니다")}finally{N(!1)}},v=async e=>{try{if((await fetch("/api/portfolio/".concat(e),{method:"DELETE",headers:{"X-User-ID":"demo_user"}})).ok)y(t=>t.filter(t=>t.id!==e)),x.ZP.success("포트폴리오에서 제거되었습니다"),w();else throw Error("제거 실패")}catch(e){console.error("포트폴리오 아이템 제거 실패:",e),x.ZP.error("제거에 실패했습니다")}};return i?j?(0,s.jsx)(d.Z,{children:(0,s.jsxs)("div",{className:"text-center py-20",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"}),(0,s.jsx)("p",{className:"mt-4 text-gray-500",children:"포트폴리오를 불러오는 중..."})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l(),{children:[(0,s.jsx)("title",{children:"\uD83D\uDC8E 내 포트폴리오 - KPOP FANfolio"}),(0,s.jsx)("meta",{name:"description",content:"나만의 K-POP 포트폴리오를 관리하고 실시간 차트 변화를 모니터링하세요"})]}),(0,s.jsx)(d.Z,{children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,s.jsx)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2 flex items-center",children:[(0,s.jsx)(n.I8D,{className:"w-8 h-8 mr-3 text-primary-500"}),"\uD83D\uDC8E 내 포트폴리오"]}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"내가 관심있는 K-POP 트랙들의 실시간 차트 순위를 모니터링하세요"})]}),(0,s.jsx)("div",{className:"flex items-center space-x-3",children:(0,s.jsxs)(o(),{href:"/search",className:"bg-primary-600 text-white px-6 py-3 rounded-xl hover:bg-primary-700 transition-colors flex items-center",children:[(0,s.jsx)(n.wEH,{className:"w-4 h-4 mr-2"}),"곡 추가하기"]})})]})}),(0,s.jsx)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:g?(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"총 아티스트"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-primary-600",children:g.total_artists})]}),(0,s.jsx)(n.I8D,{className:"w-8 h-8 text-primary-500"})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"총 트랙"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:g.total_tracks})]}),(0,s.jsx)(n.Op,{className:"w-8 h-8 text-blue-500"})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"평균 순위"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-600",children:g.avg_rank?"#".concat(g.avg_rank):"N/A"})]}),(0,s.jsx)(n.yyP,{className:"w-8 h-8 text-green-500"})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"최고 순위"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:g.best_rank?"#".concat(g.best_rank):"N/A"})]}),(0,s.jsx)(n.Z3q,{className:"w-8 h-8 text-yellow-500"})]})})]}):null}),(0,s.jsx)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-8",children:(0,s.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,s.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"개요",icon:n.I8D},{id:"table",label:"상세 목록",icon:n.Op},{id:"insights",label:"인사이트",icon:n.yyP}].map(e=>(0,s.jsxs)("button",{onClick:()=>b(e.id),className:"group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm ".concat(u===e.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,s.jsx)(e.icon,{className:"mr-2 h-5 w-5 ".concat(u===e.id?"text-primary-500":"text-gray-400 group-hover:text-gray-500")}),e.label]},e.id))})})}),(0,s.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:["overview"===u&&(0,s.jsx)("div",{className:"space-y-6",children:0===h.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(n.I8D,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"포트폴리오가 비어있습니다"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"관심있는 K-POP 트랙을 추가하고 실시간 차트 순위를 모니터링해보세요"}),(0,s.jsxs)(o(),{href:"/search",className:"bg-primary-600 text-white px-6 py-3 rounded-xl hover:bg-primary-700 transition-colors inline-flex items-center",children:[(0,s.jsx)(n.wEH,{className:"w-4 h-4 mr-2"}),"첫 번째 곡 추가하기"]})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map((e,t)=>(0,s.jsxs)(c.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1*t},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-bold text-gray-900 dark:text-white",children:e.artist}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.track})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"font-bold text-primary-600",children:["#",e.current_rank||"N/A"]}),e.value_change&&(0,s.jsxs)("p",{className:"text-sm ".concat(e.value_change>0?"text-green-600":"text-red-600"),children:[e.value_change>0?"+":"",e.value_change.toFixed(1),"%"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,s.jsxs)("span",{children:["추가일: ",new Date(e.added_at).toLocaleDateString()]}),(0,s.jsxs)("button",{onClick:()=>v(e.id),className:"text-red-500 hover:text-red-700 transition-colors flex items-center",children:[(0,s.jsx)(n.Xm5,{className:"w-3 h-3 mr-1"}),"제거"]})]}),e.notes&&(0,s.jsx)("div",{className:"mt-3 p-2 bg-gray-50 dark:bg-gray-700 rounded text-sm",children:e.notes})]},e.id))})}),"table"===u&&(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"아티스트 / 곡"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"현재 순위"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"변화율"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"추가일"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"액션"})]})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:h.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.artist}),(0,s.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.track})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["#",e.current_rank||"N/A"]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.value_change?(0,s.jsxs)("span",{className:"text-sm font-medium ".concat(e.value_change>0?"text-green-600":"text-red-600"),children:[e.value_change>0?"+":"",e.value_change.toFixed(1),"%"]}):(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"N/A"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(e.added_at).toLocaleDateString()}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("button",{onClick:()=>v(e.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 transition-colors",children:(0,s.jsx)(n.Xm5,{className:"w-4 h-4"})})})]},e.id))})]})})}),"insights"===u&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(n.yyP,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"인사이트 준비 중"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"포트폴리오 분석 및 추천 기능이 곧 추가됩니다"})]})]})]})})]}):(0,s.jsx)(d.Z,{children:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"로딩 중..."})]})})})}}},function(e){e.O(0,[445,415,556,303,720,161,888,774,179],function(){return e(e.s=5073)}),_N_E=e.O()}]);