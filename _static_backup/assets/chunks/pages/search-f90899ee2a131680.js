(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8266:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return a(8721)}])},7026:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(5893),r=a(7294),l=a(2914),i=a(2450);let c={melon:"MELON",genie:"GENIE",bugs:"BUGS",vibe:"VIBE",spotify:"SPOTIFY",youtube:"YOUTUBE",billboard:"BILLBOARD"};function n(e){let{className:t=""}=e,[a,n]=(0,r.useState)({}),[o,d]=(0,r.useState)(!0),m=async()=>{try{let e=await i.k3.getUpdateStatus();e.charts&&n(e.charts)}catch(e){console.error("차트 업데이트 현황 조회 중 오류:",e)}finally{d(!1)}};(0,r.useEffect)(()=>{m();let e=setInterval(()=>{m()},3e5);return()=>{clearInterval(e)}},[]);let x=e=>{try{if(e&&e.includes("."))return e;return new Date(e).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"Asia/Seoul"}).replace(/\. /g,".").replace(" "," ")}catch(t){return e||"-"}};return(0,s.jsx)("div",{className:"rounded-xl overflow-hidden ".concat(t),children:(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 h-auto max-h-[150px]",children:[(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-lg",children:[(0,s.jsxs)("h3",{className:"font-bold text-xs mb-2 text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[(0,s.jsx)(l.qyc,{className:"w-3 h-3"}),"[차트별 업데이트시간]"]}),(0,s.jsxs)("div",{className:"space-y-0.5 text-[11px]",children:[(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["• ",(0,s.jsx)("span",{className:"font-semibold",children:"한국 3사"})," (멜론, 지니, 벅스) → 하루 4회: 01시 / 07시 / 13시 / 19시"]}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["• ",(0,s.jsx)("span",{className:"font-semibold",children:"Vibe"})," → 하루 2회: 01시 / 13시"]}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["• ",(0,s.jsx)("span",{className:"font-semibold",children:"Spotify"})," → 매일 09:00 KST"]}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["• ",(0,s.jsx)("span",{className:"font-semibold",children:"YouTube"})," → 매일 12:00 KST"]}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["• ",(0,s.jsx)("span",{className:"font-semibold",children:"Billboard"})," → 매주 화요일 14:00 KST 경"]})]})]}),(0,s.jsxs)("div",{className:"bg-black rounded-lg p-2 font-mono text-[10px] overflow-hidden relative",children:[(0,s.jsx)("div",{className:"text-green-400 mb-1",children:"[실시간 DB 업데이트 현황]"}),(0,s.jsx)("div",{className:"space-y-0.5",children:o?(0,s.jsx)("div",{className:"text-yellow-400",children:"Loading..."}):(0,s.jsx)(s.Fragment,{children:Object.entries(a).length>0?Object.entries(a).map(e=>{let[t,a]=e,r=c[t]||t.toUpperCase(),l="success"===a.status?"text-green-400":"failed"===a.status?"text-red-400":"outdated"===a.status?"text-yellow-400":"text-gray-400",i="success"===a.status?"✓":"failed"===a.status?"✗":"outdated"===a.status?"⚠":"◐";return(0,s.jsxs)("div",{className:l,children:[r," - ",x(a.last_update)," ",i]},t)}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-yellow-400",children:"API 연결 중..."}),(0,s.jsx)("div",{className:"text-gray-500",children:"실제 크롤링 시간을 불러오는 중입니다"})]})})})]})]})})}},6431:function(e,t,a){"use strict";var s=a(5893),r=a(7294),l=a(5675),i=a.n(l),c=a(5154);t.Z=e=>{let{src:t,alt:a,width:l,height:n,className:o="",fill:d=!1,artistName:m="",trackName:x="",priority:u=!1,unoptimized:h=!0}=e,[g,p]=(0,r.useState)(""),[b,y]=(0,r.useState)(0),[j,f]=(0,r.useState)(!0),N=()=>{let e=[];if(t&&t.includes("/artist/"))console.log("❌ 잘못된 src 감지, API URL로 대체:",t);else if(t&&t.includes("/api/album-image-v2/"))e.push(t);else if(t&&t.includes("/api/album-image/")){let a=t.replace("/api/album-image/","/api/album-image-v2/");console.log("\uD83D\uDD04 기존 API를 v2로 변경:",t,"→",a),e.push(a)}if(m&&x&&e.push(c.mb.albumImage(m,x)),m&&e.push(c.mb.albumImage(m)),m){let t=m.charAt(0).toUpperCase();e.push(c.mb.defaultImage({뉴:"N",아:"A",블:"B",에:"A",세:"S",데:"D",레:"L",트:"T",아이:"I"}[t]||t))}return e.push(c.mb.defaultImage("default")),e};if((0,r.useEffect)(()=>{let e=N();e.length>0&&(p(e[0]),y(0),f(!0))},[m,x,t]),!j&&b>=N().length)return(0,s.jsx)("div",{className:"bg-gray-200 flex items-center justify-center ".concat(o),style:{width:l,height:n},children:(0,s.jsx)("div",{className:"text-gray-500 text-xl font-bold",children:m?m.charAt(0).toUpperCase():"?"})});let v={src:g,alt:a||"".concat(m).concat(x?" - ".concat(x):""," 앨범 이미지"),className:o,onError:()=>{let e=N(),a=b+1;a<e.length?(y(a),p(e[a]),console.log("이미지 폴백 ".concat(a+1,"/").concat(e.length,": ").concat(e[a]))):(console.warn("모든 이미지 폴백 실패:",{artistName:m,trackName:x,originalSrc:t}),f(!1))},onLoad:()=>{f(!1)},priority:u,unoptimized:!0,style:{objectFit:"cover"}};return d?(0,s.jsx)(i(),{...v,fill:!0}):(0,s.jsx)(i(),{...v,width:l||64,height:n||64})}},5154:function(e,t,a){"use strict";a.d(t,{mb:function(){return r}});let s={BASE_URL:"https://api.kpopranker.chargeapp.net",IS_DEVELOPMENT:!1},r={albumImage:(e,t)=>{let a=encodeURIComponent(e);if(t){let e=encodeURIComponent(t);return"".concat(s.BASE_URL,"/api/album-image-v2/").concat(a,"/").concat(e)}return"".concat(s.BASE_URL,"/api/album-image-v2/").concat(a)},staticFile:e=>{let t=e.startsWith("/static/")?e:"/static/".concat(e);return"".concat(s.BASE_URL).concat(t)},defaultImage:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return"".concat(s.BASE_URL,"/static/default_images/").concat(e,".jpg")},search:e=>"".concat(s.BASE_URL,"/api/search?q=").concat(encodeURIComponent(e)),trending:()=>"".concat(s.BASE_URL,"/api/trending"),portfolio:()=>"".concat(s.BASE_URL,"/api/portfolio"),artistDetail:e=>"".concat(s.BASE_URL,"/api/artist/").concat(encodeURIComponent(e),"/complete")};s.IS_DEVELOPMENT&&console.log("\uD83D\uDD27 API Configuration:",{BASE_URL:s.BASE_URL,NODE_ENV:"production",NEXT_PUBLIC_API_URL:"https://api.kpopranker.chargeapp.net"})},8721:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return O}});var s=a(5893),r=a(7294),l=a(9008),i=a.n(l),c=a(1664),n=a.n(c),o=a(3161),d=a(3495),m=a(2914),x=a(2435),u=a(3148),h=a(6495),g=a(2450);u.kL.register(u.uw,u.f$,u.od,u.jn,u.Dx,u.u,u.De);var p=e=>{let{chartName:t,artistName:a,trackName:l,period:i=30}=e,[c,n]=(0,r.useState)([]),[o,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{x()},[t,a,l,i]);let x=async()=>{m(!0);try{let e=await g.zZ.getHistory(a,l,"".concat(i,"d"));if(e.data&&e.data.history){let a=e.data.history.filter(e=>e.chart===t);n(a||[])}}catch(e){console.error("Failed to fetch history:",e),n([])}finally{m(!1)}};if(o)return(0,s.jsx)("div",{className:"h-48 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})});if(0===c.length)return(0,s.jsx)("div",{className:"h-48 flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"트렌드 데이터가 없습니다"})});let u={labels:c.map(e=>new Date(e.date).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})),datasets:[{label:"".concat(t," 순위"),data:c.map(e=>e.rank),borderColor:"rgb(99, 102, 241)",backgroundColor:"rgba(99, 102, 241, 0.1)",borderWidth:2,pointRadius:4,pointHoverRadius:6,tension:.4}]};return(0,s.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},className:"h-48",children:(0,s.jsx)(h.x1,{data:u,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:e=>"".concat(e.parsed.y,"위")}}},scales:{x:{grid:{display:!1},ticks:{maxRotation:45,minRotation:45}},y:{reverse:!0,beginAtZero:!1,grid:{color:"rgba(0, 0, 0, 0.1)"},ticks:{stepSize:1,callback:e=>"".concat(e,"위")}}}}})})};let b={Spotify:m.l4C,YouTube:m.V2E,AppleMusic:m.oPZ,Shazam:x.IIk,Billboard:x.m7w},y={Spotify:"bg-green-500",YouTube:"bg-red-500",AppleMusic:"bg-gray-800",Shazam:"bg-blue-500",Billboard:"bg-purple-500",Melon:"bg-green-600",Genie:"bg-blue-600",Bugs:"bg-orange-500",Vibe:"bg-purple-600",Flo:"bg-pink-500"};var j=e=>{let{name:t,data:a,index:l,artistName:i,trackName:c,isLoading:n=!1}=e,[o,x]=(0,r.useState)(!1),u=b[t]||m.rVf,h=y[t]||"bg-gray-500",g=t&&"youtube"===t.toLowerCase(),j=g&&(a.view_count_formatted||a.views),f=a.rank&&a.previous_rank?a.previous_rank-a.rank:null;return(0,s.jsxs)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*l},className:"glass rounded-2xl p-6 card-hover",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-3 rounded-full ".concat(h," text-white"),children:(0,s.jsx)(u,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:t}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[new Date(a.published_at).toLocaleString("ko-KR",{hour:"2-digit",minute:"2-digit"})," 기준"]})]})]}),(null!==a.rank||j)&&i&&c&&(0,s.jsx)(d.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>x(!o),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"트렌드 보기",children:(0,s.jsx)(m.Op,{className:"w-5 h-5 text-primary-500"})})]}),n?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mb-2"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"로딩 중..."})]}):null!==a.rank||j?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{children:g&&j?(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-3xl font-bold text-red-500",children:a.view_count_formatted||a.views}),(0,s.jsx)("p",{className:"text-sm text-red-400 mt-1",children:"조회수"})]}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-baseline space-x-2",children:[(0,s.jsxs)("p",{className:"text-4xl font-bold text-primary-500",children:[a.rank,"위"]}),null!==f&&(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[f?f>0?(0,s.jsx)(m.ZTc,{className:"w-3 h-3 text-green-500"}):(0,s.jsx)(m.NWQ,{className:"w-3 h-3 text-red-500"}):(0,s.jsx)(m.iFH,{className:"w-3 h-3 text-gray-400"}),(0,s.jsx)("span",{className:"text-sm font-medium ".concat(f>0?"text-green-500":f<0?"text-red-500":"text-gray-400"),children:f?f>0?"+".concat(f):"".concat(f):"NEW"})]})]}),(0,s.jsxs)("div",{className:"mt-2 space-y-1",children:[a.peak_rank&&(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["최고 순위: ",a.peak_rank,"위"]}),a.weeks_on_chart&&(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["차트인: ",a.weeks_on_chart,"주"]})]})]})}),a.album_image&&(0,s.jsx)("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden",children:(0,s.jsx)("img",{src:a.album_image,alt:"Album cover",className:"w-full h-full object-cover",onError:e=>{let t=e.target;"/images/album-placeholder.svg"!==t.src&&(t.src="/images/album-placeholder.svg")}})})]}),o&&i&&c&&(0,s.jsx)(d.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,s.jsx)(p,{chartName:t,artistName:i,trackName:c})})]}):(0,s.jsx)("div",{className:"text-center py-8",children:g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-gray-400 dark:text-gray-600",children:"영상 없음"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-600 mt-1",children:"YouTube에서 찾을 수 없습니다"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-gray-400 dark:text-gray-600",children:"순위 없음"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-600 mt-1",children:"차트에 진입하지 않았습니다"})]})})]})};let f={Spotify:{name:"Spotify",color:"#1DB954",isGlobal:!0,icon:"\uD83C\uDFB5"},spotify:{name:"Spotify",color:"#1DB954",isGlobal:!0,icon:"\uD83C\uDFB5"},Billboard:{name:"Billboard",color:"#000000",isGlobal:!0,icon:"\uD83D\uDCCA"},billboard:{name:"Billboard",color:"#000000",isGlobal:!0,icon:"\uD83D\uDCCA"},"Apple Music":{name:"Apple Music",color:"#FA243C",isGlobal:!0,icon:"\uD83C\uDF4E"},apple_music:{name:"Apple Music",color:"#FA243C",isGlobal:!0,icon:"\uD83C\uDF4E"},YouTube:{name:"YouTube 조회수",color:"#FF0000",isGlobal:!0,icon:"\uD83D\uDCFA"},youtube:{name:"YouTube 조회수",color:"#FF0000",isGlobal:!0,icon:"\uD83D\uDCFA"},Vibe:{name:"Vibe",color:"#FF6B6B",isGlobal:!0,icon:"\uD83C\uDFB6"},vibe:{name:"Vibe",color:"#FF6B6B",isGlobal:!0,icon:"\uD83C\uDFB6"},Melon:{name:"멜론",color:"#00CD3C",isGlobal:!1,icon:"\uD83C\uDF48"},melon:{name:"멜론",color:"#00CD3C",isGlobal:!1,icon:"\uD83C\uDF48"},Genie:{name:"지니",color:"#FF6F00",isGlobal:!1,icon:"\uD83E\uDDDE"},genie:{name:"지니",color:"#FF6F00",isGlobal:!1,icon:"\uD83E\uDDDE"},Bugs:{name:"벅스",color:"#FF3366",isGlobal:!1,icon:"\uD83D\uDC1B"},bugs:{name:"벅스",color:"#FF3366",isGlobal:!1,icon:"\uD83D\uDC1B"}};function N(e){var t;let{searchResult:a,artistName:l,trackName:i,onChartClick:c}=e,{results:n}=a,o=(0,r.useMemo)(()=>{let e=Object.entries(n).filter(e=>{let[t,a]=e;return null!==a.rank&&a.rank>0}).map(e=>{let[t,a]=e,s=f[t];return{chartName:t,rank:a.rank,isGlobal:(null==s?void 0:s.isGlobal)||!1}}),t=e.filter(e=>e.isGlobal),a=e.filter(e=>!e.isGlobal),s=e.length>0?Math.min(...e.map(e=>e.rank)):null,r=e.find(e=>e.rank===s);return{totalCharts:e.length,globalCharts:t.length,domesticCharts:a.length,bestRank:s,bestChart:null==r?void 0:r.chartName,needsAttention:e.filter(e=>e.rank>50).length}},[n]),x=(0,r.useMemo)(()=>{let e=Object.entries(n).map(e=>{let[t,a]=e;return{chartName:t,...a,config:f[t]||{name:t,color:"#666",isGlobal:!1,icon:"\uD83D\uDCCA"}}});return{global:e.filter(e=>e.config.isGlobal),domestic:e.filter(e=>!e.config.isGlobal)}},[n]),u=(e,t,a,r)=>{let l=null!==t.rank&&t.rank>0,i="youtube"===e.toLowerCase(),n=i&&t.view_count_formatted,o=l&&t.rank>50,x=l||n;return(0,s.jsxs)(d.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.05*r},className:"\n          relative p-4 rounded-xl border-2 transition-all duration-300\n          ".concat(l||n?o?"border-yellow-400 bg-yellow-50 dark:bg-yellow-900/20":"border-green-400 bg-green-50 dark:bg-green-900/20":"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/50","\n          ").concat(x?"cursor-pointer hover:shadow-lg hover:scale-105":"hover:shadow-lg hover:scale-105","\n        "),onClick:()=>{x&&c&&c(e)},children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:a.icon}),(0,s.jsx)("h3",{className:"font-semibold",style:{color:a.color},children:a.name})]}),o&&(0,s.jsx)(m.gJy,{className:"text-yellow-500 animate-pulse"}),x&&(0,s.jsx)("div",{className:"opacity-60 hover:opacity-100 transition-opacity",children:(0,s.jsx)(m.Op,{className:"text-sm"})})]}),(0,s.jsx)("div",{className:"text-center",children:i?n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-red-600",children:t.view_count_formatted}),(0,s.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"조회수"}),x&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"클릭해서 변화 확인"})]}):(0,s.jsx)("div",{className:"text-gray-400",children:(0,s.jsx)("span",{className:"text-sm",children:"영상 없음"})}):l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-3xl font-bold ".concat(o?"text-yellow-600":"text-green-600"),children:[t.rank,"위"]}),o?(0,s.jsx)("p",{className:"text-xs text-yellow-600 mt-1",children:"스트리밍 필요!"}):(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"클릭해서 순위 변화 확인"})]}):(0,s.jsx)("div",{className:"text-gray-400",children:(0,s.jsx)("span",{className:"text-sm",children:"순위 없음"})})})]},e)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[(0,s.jsx)(m.Op,{className:"mr-2"}),"차트 성과 요약"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-3xl font-bold text-primary-500",children:o.totalCharts}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"진입 차트"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("p",{className:"text-3xl font-bold text-green-500",children:[o.bestRank||"-","위"]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"최고 순위"}),o.bestChart&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:null===(t=f[o.bestChart])||void 0===t?void 0:t.name})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-3xl font-bold text-blue-500",children:o.globalCharts}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"글로벌 차트"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-3xl font-bold text-purple-500",children:o.domesticCharts}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"국내 차트"})]})]}),o.needsAttention>0&&(0,s.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-4 p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg border border-yellow-400",children:(0,s.jsxs)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 flex items-center",children:[(0,s.jsx)(m.gJy,{className:"mr-2"}),o.needsAttention,"개 차트에서 순위가 50위 이하입니다. 팬덤 파워가 필요해요! \uD83D\uDCAA"]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[(0,s.jsx)(m.q3v,{className:"mr-2 text-blue-500"}),"글로벌 차트"]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:x.global.map((e,t)=>u(e.chartName,e,e.config,t))})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center",children:[(0,s.jsx)(m.HcQ,{className:"mr-2 text-purple-500"}),"국내 차트"]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:x.domestic.map((e,t)=>u(e.chartName,e,e.config,t))})]}),0===o.totalCharts&&(0,s.jsxs)(d.E.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-8 glass rounded-xl",children:[(0,s.jsx)(m.yyP,{className:"text-6xl text-gray-400 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"아직 차트에 진입하지 못했어요. 스트리밍을 시작해볼까요? \uD83C\uDFB5"})]})]})}var v=a(1526),k=a(9844),w=a(6501);u.kL.register(u.uw,u.f$,u.od,u.jn,u.Dx,u.u,u.De,u.Gu);var D=e=>{let{isOpen:t,onClose:a,chart:l,artist:i,track:c,currentRank:n}=e,[o,x]=(0,r.useState)([]),[u,p]=(0,r.useState)(!1),[b,y]=(0,r.useState)(0),[j,f]=(0,r.useState)("stable");(0,r.useEffect)(()=>{t&&i&&c&&N()},[t,l,i,c]);let N=async()=>{p(!0);try{let e=await g.k3.getHistory(l,i,c,30);x(e.history||[]),y(e.rank_change||0),f(e.trend||"stable")}catch(e){console.error("History fetch error:",e),w.ZP.error("순위 히스토리를 불러올 수 없습니다.")}finally{p(!1)}},D={labels:o.map(e=>{let t=new Date(e.date);return"".concat(t.getMonth()+1,"/").concat(t.getDate())}).reverse(),datasets:[{label:"순위",data:o.map(e=>e.rank).reverse(),borderColor:"spotify"===l?"#1DB954":"youtube"===l?"#FF0000":"melon"===l?"#00CD3C":"billboard"===l?"#1B1B1B":"#ef5144",backgroundColor:"spotify"===l?"rgba(29, 185, 84, 0.1)":"youtube"===l?"rgba(255, 0, 0, 0.1)":"melon"===l?"rgba(0, 205, 60, 0.1)":"billboard"===l?"rgba(27, 27, 27, 0.1)":"rgba(239, 81, 68, 0.1)",tension:.4,fill:!0,pointRadius:6,pointHoverRadius:8}]},_={responsive:!0,maintainAspectRatio:!1,scales:{y:{reverse:!0,beginAtZero:!1,min:1,max:Math.max(...o.map(e=>e.rank)||[100]),ticks:{stepSize:10,callback:function(e){return e+"위"}}},x:{grid:{display:!1}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){let t=e.dataIndex,a=o[o.length-1-t],s="".concat(e.parsed.y,"위");return(null==a?void 0:a.views_or_streams)&&(s+=" (".concat(a.views_or_streams,")")),s}}}}};if(!t)return null;let C=b>10?{text:"".concat(b,"계단 상승! \uD83D\uDE80"),className:"text-green-600 font-bold",icon:(0,s.jsx)(m.yyP,{className:"w-5 h-5 text-yellow-500"})}:b>0?{text:"".concat(b,"계단 상승"),className:"text-green-600",icon:null}:b<-5?{text:"".concat(Math.abs(b),"계단 하락 - 화력 필요! \uD83D\uDD25"),className:"text-red-600 font-bold",icon:(0,s.jsx)(m.ZBn,{className:"w-5 h-5 text-red-500"})}:b<0?{text:"".concat(Math.abs(b),"계단 하락"),className:"text-red-600",icon:null}:{text:"순위 유지 중",className:"text-gray-600",icon:null};return(0,s.jsx)(v.M,{children:t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:a}),(0,s.jsx)(d.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-200 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,s.jsxs)("div",{className:"relative p-6 ".concat({spotify:"bg-green-500",youtube:"bg-red-500",melon:"bg-green-400",billboard:"bg-gray-800",bugs:"bg-orange-500",genie:"bg-blue-500",vibe:"bg-purple-500",apple_music:"bg-pink-500"}[l.toLowerCase()]||"bg-primary-500"),children:[(0,s.jsx)("button",{onClick:a,className:"absolute top-4 right-4 p-2 rounded-full bg-white bg-opacity-20 hover:bg-opacity-30 transition-colors",children:(0,s.jsx)(m.aHS,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("h2",{className:"text-2xl font-bold text-white mb-2",children:[l.toUpperCase()," 순위 변화"]}),(0,s.jsxs)("p",{className:"text-white text-opacity-90",children:[i," - ",c]}),n&&(0,s.jsxs)("div",{className:"mt-4 flex items-center gap-4",children:[(0,s.jsxs)("span",{className:"text-3xl font-bold text-white",children:["현재 ",n,"위"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[b>0?(0,s.jsx)(k.YfH,{className:"w-6 h-6 text-green-500"}):b<0?(0,s.jsx)(k.KYc,{className:"w-6 h-6 text-red-500"}):(0,s.jsx)(m.Op,{className:"w-6 h-6 text-gray-500"}),(0,s.jsxs)("span",{className:"".concat(C.className," bg-white px-3 py-1 rounded-full flex items-center gap-2"),children:[C.icon,C.text]})]})]})]}),(0,s.jsx)("div",{className:"p-6",children:u?(0,s.jsx)("div",{className:"h-96 flex items-center justify-center",children:(0,s.jsx)("div",{className:"loading-spinner"})}):o.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"h-96",children:(0,s.jsx)(h.x1,{data:D,options:_})}),b<-5&&(0,s.jsxs)(d.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-6 p-4 bg-red-50 dark:bg-red-900 dark:bg-opacity-20 rounded-lg border-l-4 border-red-500",children:[(0,s.jsxs)("h3",{className:"font-bold text-red-700 dark:text-red-400 mb-2 flex items-center gap-2",children:[(0,s.jsx)(m.ZBn,{className:"w-5 h-5"}),"팬덤 화력 집중 필요!"]}),(0,s.jsxs)("p",{className:"text-sm text-red-600 dark:text-red-300",children:["최근 순위가 하락하고 있습니다. ",l.toUpperCase(),"에서 스트리밍과 검색을 늘려주세요!"]})]}),b>10&&(0,s.jsxs)(d.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-6 p-4 bg-green-50 dark:bg-green-900 dark:bg-opacity-20 rounded-lg border-l-4 border-green-500",children:[(0,s.jsxs)("h3",{className:"font-bold text-green-700 dark:text-green-400 mb-2 flex items-center gap-2",children:[(0,s.jsx)(m.yyP,{className:"w-5 h-5"}),"순위 급상승 중!"]}),(0,s.jsx)("p",{className:"text-sm text-green-600 dark:text-green-300",children:"팬덤의 노력이 빛을 발하고 있습니다! 이 기세를 이어가세요!"})]})]}):(0,s.jsx)("div",{className:"h-96 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(m.Op,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"순위 히스토리 데이터가 아직 수집되지 않았습니다."}),(0,s.jsx)("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:"매일 자동으로 순위를 수집하고 있습니다."})]})})})]})})]})})},_=a(4050),C=a(837);function S(e){let{isOpen:t,onClose:a}=e,[l,i]=(0,r.useState)(!1),[c,n]=(0,r.useState)({name:"K-POP Fan",email:"fan@kpopranker.com"}),{demoLogin:o}=(0,C.a)(),x=async()=>{i(!0);try{await o(c.name,c.email)?(w.Am.success("로그인 성공! 포트폴리오 기능을 사용할 수 있습니다."),a()):w.Am.error("로그인에 실패했습니다.")}catch(e){w.Am.error("로그인 중 오류가 발생했습니다.")}finally{i(!1)}},u=async e=>{i(!0);try{(0,w.Am)("".concat(e," 소셜 로그인은 준비 중입니다. 데모 로그인을 사용해주세요."),{icon:"ℹ️"})}finally{i(!1)}};return(0,s.jsx)(v.M,{children:t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50",onClick:a}),(0,s.jsx)(d.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"glass-morphism rounded-3xl p-8 w-full max-w-md relative",children:[(0,s.jsx)("button",{onClick:a,className:"absolute top-4 right-4 p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:(0,s.jsx)(m.aHS,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)(d.E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1},className:"w-16 h-16 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(m.IPB,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"로그인"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"포트폴리오 관리를 위해 로그인이 필요합니다"})]}),(0,s.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-center text-primary-600 dark:text-primary-400",children:"\uD83D\uDE80 데모 로그인 (체험하기)"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"닉네임"}),(0,s.jsx)("input",{type:"text",value:c.name,onChange:e=>n({...c,name:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"당신의 K-POP 팬 닉네임"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"이메일"}),(0,s.jsx)("input",{type:"email",value:c.email,onChange:e=>n({...c,email:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"이메일 주소"})]}),(0,s.jsxs)("button",{onClick:x,disabled:l,className:"w-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white py-3 px-6 rounded-xl font-semibold hover:shadow-lg transition-all disabled:opacity-50 flex items-center justify-center space-x-2",children:[(0,s.jsx)(m.Xws,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:l?"로그인 중...":"데모 로그인"})]})]}),(0,s.jsxs)("div",{className:"relative mb-6",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-white dark:bg-dark-100 text-gray-500",children:"또는"})})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("button",{onClick:()=>u("Google"),disabled:l,className:"w-full flex items-center justify-center space-x-3 py-3 px-6 border border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-all disabled:opacity-50",children:[(0,s.jsx)(m.ldW,{className:"w-5 h-5 text-red-500"}),(0,s.jsx)("span",{children:"Google로 로그인"})]}),(0,s.jsxs)("button",{onClick:()=>u("Kakao"),disabled:l,className:"w-full flex items-center justify-center space-x-3 py-3 px-6 border border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-all disabled:opacity-50",children:[(0,s.jsx)(_.X78,{className:"w-5 h-5 text-yellow-500"}),(0,s.jsx)("span",{children:"카카오로 로그인"})]})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["로그인하면 포트폴리오 관리, 순위 알림 등",(0,s.jsx)("br",{}),"모든 기능을 사용할 수 있습니다"]})})]})})]})})}var E=a(6431),A=e=>{let{artist:t,track:a="",size:r="medium",className:l="",priority:i=!1,shape:c="rounded",showArtistName:n=!1,onClick:o}=e,d={small:{width:48,height:48,className:"w-12 h-12"},medium:{width:64,height:64,className:"w-16 h-16"},large:{width:96,height:96,className:"w-24 h-24"},xlarge:{width:128,height:128,className:"w-32 h-32"}}[r],m="\n    ".concat(d.className,"\n    ").concat({square:"",rounded:"rounded-lg",circle:"rounded-full"}[c],"\n    ").concat("shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105","\n    ").concat(o?"cursor-pointer hover:brightness-110":"","\n    ").concat(l,"\n    overflow-hidden\n    bg-gradient-to-br from-purple-100 to-pink-100\n    border-2 border-white\n  ").trim().replace(/\s+/g," ");return(0,s.jsxs)("div",{className:"album-image-wrapper inline-block",children:[(0,s.jsx)("div",{className:m,onClick:o,title:a?"".concat(t," - ").concat(a):t,children:(0,s.jsx)(E.Z,{src:"",alt:a?"".concat(t," - ").concat(a," 앨범 커버"):"".concat(t," 아티스트 이미지"),artistName:t,trackName:a,width:d.width,height:d.height,className:"w-full h-full object-cover",priority:i,unoptimized:!0})}),n&&(0,s.jsxs)("div",{className:"mt-2 text-center",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-gray-800 truncate",children:t}),a&&(0,s.jsx)("div",{className:"text-xs text-gray-600 truncate",children:a})]})]})},F=a(4529),B=a(782);let I=(0,F.Ue)()((0,B.tJ)(e=>({searchHistory:[],lastSearch:null,addToHistory:(t,a)=>e(e=>({searchHistory:[{id:Date.now().toString(),artist:t,track:a,timestamp:Date.now()},...e.searchHistory.filter(e=>!(e.artist===t&&e.track===a))].slice(0,10),lastSearch:{artist:t,track:a}})),clearHistory:()=>e({searchHistory:[],lastSearch:null}),removeFromHistory:t=>e(e=>({searchHistory:e.searchHistory.filter(e=>e.id!==t)}))}),{name:"search-storage"}));var P=a(7026);function O(){var e,t,l;let[c,x]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),[p,b]=(0,r.useState)(""),[y,f]=(0,r.useState)(""),{addToHistory:v,searchHistory:k}=I(),{isAuthenticated:_}=(0,C.a)(),[E,F]=(0,r.useState)(null),[B,O]=(0,r.useState)(!1),[R,L]=(0,r.useState)(!1),[U,G]=(0,r.useState)("overview"),[T,H]=(0,r.useState)(!1),[Z,M]=(0,r.useState)(null),[z,K]=(0,r.useState)(!1),V=e=>{M(e),K(!0)};(0,r.useEffect)(()=>{h(!0),Promise.resolve().then(a.t.bind(a,1163,23)).then(e=>{let{useRouter:t}=e,a=t();x(a);let{artist:s,track:r}=a.query;s&&b("string"==typeof s?s:s[0]||""),r&&f("string"==typeof r?r:r[0]||"")})},[]);let Y=e=>{let t={};return e.results&&Array.isArray(e.results)&&e.results.forEach(e=>{t[e.chart]={rank:e.rank,album_image:e.album_image,found:!0,published_at:e.published_at||new Date().toISOString(),artist:e.artist,track:e.track}}),{artist:e.artist||"",track:e.track||"",searched_at:new Date().toISOString(),charts:t,success_count:e.success_count||Object.keys(t).length,message:e.message}};(0,r.useEffect)(()=>{p&&p.trim()&&q(p,y||"")},[p,y]);let q=async(e,t)=>{O(!0);try{let a;if(t&&""!==t.trim()?(a=await g.Ue.search(e,t),console.log("Search API response:",a),v(e,t)):(a=await g.Ue.searchByArtist(e),console.log("Search by artist API response:",a)),a){let e=Y(a);console.log("Transformed result:",e),F(e)}}catch(e){console.error("Search failed:",e),w.ZP.error("검색 중 오류가 발생했습니다")}finally{O(!1)}},W=(e,t)=>{c&&c.push({pathname:"/search",query:{artist:e,track:t}})},X=async()=>{if(E){L(!0);try{var e,t;let a=(null===(e=E.parsed)||void 0===e?void 0:e.artist)||E.artist,s=(null===(t=E.parsed)||void 0===t?void 0:t.track)||E.track||"아티스트 대표곡";console.log("포트폴리오 추가 시도:",{artistToAdd:a,trackToAdd:s});let r=await fetch("/api/portfolio",{method:"POST",headers:{"Content-Type":"application/json","X-User-ID":"demo_user"},body:JSON.stringify({artist:a,track:s,notes:"검색에서 추가됨 (".concat(new Date().toLocaleDateString(),") - ").concat("아티스트 대표곡"===s?"아티스트 기반 검색":"곡 기반 검색")})}),l=await r.json();r.ok&&l.success?(w.ZP.success("\uD83D\uDC8E 포트폴리오에 추가되었습니다!"),console.log("포트폴리오 추가 성공:",l)):409===r.status?(0,w.ZP)("\uD83D\uDCCE 이미 포트폴리오에 있는 곡입니다",{icon:"\uD83D\uDCCE"}):w.ZP.error("포트폴리오 추가에 실패했습니다: "+(l.error||"알 수 없는 오류"))}catch(e){console.error("포트폴리오 추가 오류:",e),w.ZP.error("네트워크 오류가 발생했습니다")}finally{L(!1)}}},J=(null==E?void 0:null===(e=E.parsed)||void 0===e?void 0:e.artist)||(null==E?void 0:E.artist)||p||"",Q=(null==E?void 0:null===(t=E.parsed)||void 0===t?void 0:t.track)||(null==E?void 0:E.track)||y||"",$=r.useMemo(()=>{if(null==E?void 0:E.charts)return E.charts;if((null==E?void 0:E.domestic_charts)||(null==E?void 0:E.global_charts)){let e={};return E.domestic_charts&&Array.isArray(E.domestic_charts)&&E.domestic_charts.forEach(t=>{e[t.chart]={rank:t.rank,album_image:t.album_image,published_at:t.last_updated||new Date().toISOString(),found:!0,chart:t.chart,artist:t.artist,track:t.track,views_or_streams:t.views_or_streams}}),E.global_charts&&Array.isArray(E.global_charts)&&E.global_charts.forEach(t=>{e[t.chart]={rank:t.rank,album_image:t.album_image,published_at:t.last_updated||new Date().toISOString(),found:!0,chart:t.chart,artist:t.artist,track:t.track,views_or_streams:t.views_or_streams}}),e}if((null==E?void 0:E.results)&&Array.isArray(E.results)){let e={};return E.results.forEach(t=>{let a=t.chart;if(t.tracks&&t.tracks.length>0){let s=t.tracks[0];e[a]={rank:s.rank,album_image:s.album_image,published_at:s.crawl_time||new Date().toISOString(),found:!0,chart:a,artist:s.artist,track:s.track}}}),e}return{}},[E]),ee=E?{results:$,success_count:E.success_count||E.total_charts||Object.keys($).length}:null;return u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i(),{children:(0,s.jsx)("title",{children:"차트 검색 - KPOP FANfolio"})}),(0,s.jsxs)(o.Z,{children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsx)(P.Z,{className:"mb-8"}),!B&&!E&&k.length>0&&(0,s.jsxs)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[(0,s.jsx)(m.ceS,{className:"w-5 h-5 mr-2"}),"최근 검색"]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:k.slice(0,8).map(e=>(0,s.jsxs)(d.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>W(e.artist,e.track),className:"bg-white rounded-xl p-4 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("div",{className:"flex justify-center mb-3",children:(0,s.jsx)(A,{artist:e.artist,track:e.track,size:"medium",shape:"rounded"})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900 truncate text-sm",children:e.artist}),(0,s.jsx)("p",{className:"text-xs text-gray-600 truncate mt-1",children:e.track})]})]},e.id))})]}),B&&(0,s.jsxs)("div",{className:"text-center py-20",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"}),(0,s.jsx)("p",{className:"mt-4 text-gray-500",children:"전 세계 차트를 확인하는 중..."})]}),E&&!B&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6 md:p-8 border border-purple-200",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[(0,s.jsx)(d.E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:20},className:"flex-shrink-0",children:(0,s.jsx)(A,{artist:J,track:Q,size:"xlarge",shape:"rounded",priority:!0,className:"shadow-2xl"})}),(0,s.jsxs)("div",{className:"flex-1 text-center md:text-left",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center md:justify-start mb-2",children:[(0,s.jsx)(m.HcQ,{className:"w-6 h-6 mr-2 text-purple-600"}),(0,s.jsx)("span",{className:"text-sm text-purple-600 font-medium",children:"검색 결과"})]}),(0,s.jsxs)("h1",{className:"text-3xl font-bold mb-2 text-gray-900",children:[J," ",Q&&"- ".concat(Q)]}),E.message&&(0,s.jsx)("p",{className:"text-lg text-gray-600 mb-3",children:E.message}),E.query&&E.query!=="".concat(J," ").concat(Q)&&(0,s.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:['"',E.query,'" 검색 결과']}),(0,s.jsx)("div",{className:"flex items-center justify-center md:justify-start mb-4",children:(0,s.jsxs)("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:[E.success_count||Object.keys($).length,"개 차트에서 발견"]})}),E.popular_tracks&&E.popular_tracks.length>0&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"\uD83D\uDD25 인기곡:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:E.popular_tracks.slice(0,4).map((e,t)=>(0,s.jsxs)("button",{onClick:()=>W(J,e),className:"flex items-center space-x-2 px-3 py-2 bg-white rounded-lg hover:bg-gray-50 transition-colors border border-gray-200 text-sm",children:[(0,s.jsx)(A,{artist:J,track:e,size:"small",shape:"rounded"}),(0,s.jsx)("span",{className:"truncate max-w-20",children:e})]},t))})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-3",children:[(0,s.jsxs)(d.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:X,disabled:R||!J,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-2 rounded-full hover:from-purple-700 hover:to-pink-700 transition-colors flex items-center disabled:opacity-50 shadow-lg",children:[(0,s.jsx)(m.wEH,{className:"w-4 h-4 mr-2"}),R?"추가 중...":Q?"\uD83D\uDC8E 포트폴리오에 담기":"\uD83D\uDC8E 아티스트 담기"]}),(0,s.jsx)(n(),{href:"/artist/".concat(encodeURIComponent(String(J))),className:"bg-white text-purple-600 px-6 py-2 rounded-full hover:bg-gray-50 transition-colors border border-purple-200",children:"아티스트 상세"}),(0,s.jsx)(d.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{var e,t;if(!c)return;let a=window.location.href,s=(null==E?void 0:null===(e=E.parsed)||void 0===e?void 0:e.artist)||(null==E?void 0:E.artist)||"",r=(null==E?void 0:null===(t=E.parsed)||void 0===t?void 0:t.track)||(null==E?void 0:E.track)||"";navigator.share?navigator.share({title:"".concat(s," - ").concat(r," 차트 순위"),text:"KPOP FANfolio에서 실시간 차트 순위를 확인하세요!",url:a}):(navigator.clipboard.writeText(a),w.ZP.success("링크가 복사되었습니다!"))},className:"p-2 rounded-full hover:bg-white hover:text-purple-600 transition-colors",title:"공유하기",disabled:!c,children:(0,s.jsx)(m.PPi,{className:"w-5 h-5"})})]})]})]})})}),(0,s.jsx)("div",{className:"flex justify-end mb-4",children:(0,s.jsxs)("div",{className:"inline-flex rounded-lg bg-gray-200 dark:bg-gray-700 p-1",children:[(0,s.jsxs)("button",{onClick:()=>G("overview"),className:"px-4 py-2 rounded-md transition-colors flex items-center ".concat("overview"===U?"bg-white dark:bg-gray-900 text-primary-500":"text-gray-600 dark:text-gray-400"),children:[(0,s.jsx)(m.uOL,{className:"w-4 h-4 mr-2"}),"한눈에 보기"]}),(0,s.jsxs)("button",{onClick:()=>G("grid"),className:"px-4 py-2 rounded-md transition-colors flex items-center ".concat("grid"===U?"bg-white dark:bg-gray-900 text-primary-500":"text-gray-600 dark:text-gray-400"),children:[(0,s.jsx)(m.AeW,{className:"w-4 h-4 mr-2"}),"상세 보기"]})]})}),"overview"===U&&ee?(0,s.jsx)(N,{searchResult:ee,artistName:String(J),trackName:String(Q),onChartClick:V}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries($).map((e,t)=>{let[a,r]=e;return(0,s.jsx)("div",{onClick:()=>null!==r.rank&&V(a),children:(0,s.jsx)(j,{name:a,data:r,index:t,artistName:String(J),trackName:String(Q)})},a)})})]})]}),(0,s.jsx)(D,{isOpen:z,onClose:()=>K(!1),chart:Z||"",artist:J,track:Q,currentRank:Z?null===(l=$[Z])||void 0===l?void 0:l.rank:void 0}),(0,s.jsx)(S,{isOpen:T,onClose:()=>H(!1)})]})]}):(0,s.jsx)(o.Z,{children:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"로딩 중..."})]})})})}}},function(e){e.O(0,[445,415,556,196,937,303,720,675,862,161,888,774,179],function(){return e(e.s=8266)}),_N_E=e.O()}]);